<section>
  <label [for]="'input' + label">
    {{ label }}
  </label>

  <div class="input">
    <input
      [type]="type"
      [id]="'input' + label"
      [placeholder]="placeholder"
      [style.border-color]="
        showError || showRequirements ? '#d50525' : '#575655'
      "
      (blur)="validate(control.value)"
      [formControl]="control"
    />

    <button
      *ngIf="isPassword"
      class="show"
      (mousedown)="type = 'text'"
      (mouseup)="type = 'password'"
      (mouseleave)="type = 'password'"
    >
      <svg
        viewBox="0 0 16 16"
        width="24px"
        height="24px"
        *ngIf="type === 'password'"
      >
        <path
          d="M12.016 4.789a5.338 5.338 0 00-8.032 0L1.06 8l2.923 3.211a5.337 5.337 0 008.032 0l2.923-3.21-2.923-3.212zm-.971 5.539a4.025 4.025 0 01-6.125 0L2.838 8l2.117-2.327a4.025 4.025 0 016.125 0L13.162 8l-2.117 2.328zM6.303 6.303a2.406 2.406 0 103.395 0 2.38 2.38 0 00-3.395 0zM8.77 8.77a1.085 1.085 0 01-1.54 0 1.094 1.094 0 111.54 0z"
        ></path>
      </svg>

      <svg
        viewBox="0 0 16 16"
        width="24px"
        height="24px"
        *ngIf="type === 'text'"
      >
        <path
          d="M11.64 4.412l2.485-2.537h-1.803l-1.75 1.75a5.329 5.329 0 00-4.774-.175c-.692.314-1.31.77-1.814 1.339L1.06 8l2.45 2.686L1 13.25h1.803l1.61-1.61a5.33 5.33 0 007.603-.429L14.94 8l-2.923-3.211c-.122-.131-.245-.289-.376-.377zM2.837 8l2.118-2.327A4.095 4.095 0 018 4.28c.543.002 1.08.118 1.575.341L8.534 5.664A2.406 2.406 0 005.594 8c0 .18.024.36.07.534L4.439 9.75 2.837 8zm6.257 0a1.067 1.067 0 01-.324.77 1.094 1.094 0 01-1.514 0l1.54-1.514c.188.203.294.468.298.744zm1.951 2.328A4.095 4.095 0 018 11.718a4.07 4.07 0 01-2.625-1.023l.954-.945A2.42 2.42 0 109.75 6.329l.945-.954c.114.105.236.192.35.315L13.162 8l-2.117 2.328z"
        ></path>
      </svg>
    </button>
  </div>

  <span *ngIf="showError && !showRequirements" class="error">
    <svg viewBox="0 0 16 16" width="24px" height="24px">
      <path
        d="M8.656 5.375H7.344V8h1.312V5.375zM8 10.625a.875.875 0 100-1.75.875.875 0 000 1.75z"
        fill="#d50525"
      ></path>
      <path
        d="M13.408 13.031H2.591a1.496 1.496 0 01-1.33-.796 1.593 1.593 0 01.044-1.61l5.408-8.662A1.505 1.505 0 018 1.219a1.505 1.505 0 011.286.726l5.408 8.68a1.593 1.593 0 010 1.627 1.496 1.496 0 01-1.287.78zM8 2.531a.192.192 0 00-.175.105l-5.408 8.671a.297.297 0 000 .298.2.2 0 00.184.114h10.806a.2.2 0 00.184-.114.297.297 0 000-.298l-5.416-8.67A.192.192 0 008 2.53z"
        fill="#d50525"
      ></path>
    </svg>
    {{ displayedError }}
  </span>

  <span *ngIf="showRequirements" class="error">
    <svg viewBox="0 0 16 16" width="24px" height="24px">
      <path
        d="M8.656 5.375H7.344V8h1.312V5.375zM8 10.625a.875.875 0 100-1.75.875.875 0 000 1.75z"
        fill="#d50525"
      ></path>
      <path
        d="M13.408 13.031H2.591a1.496 1.496 0 01-1.33-.796 1.593 1.593 0 01.044-1.61l5.408-8.662A1.505 1.505 0 018 1.219a1.505 1.505 0 011.286.726l5.408 8.68a1.593 1.593 0 010 1.627 1.496 1.496 0 01-1.287.78zM8 2.531a.192.192 0 00-.175.105l-5.408 8.671a.297.297 0 000 .298.2.2 0 00.184.114h10.806a.2.2 0 00.184-.114.297.297 0 000-.298l-5.416-8.67A.192.192 0 008 2.53z"
        fill="#d50525"
      ></path>
    </svg>
    {{ pwRequirements }}
  </span>

  <div class="bar" *ngIf="showStrength">
    <span
      class="filled"
      [class.weak]="pwStrength < 4"
      [class.medium]="pwStrength === 4"
      [class.strong]="pwStrength > 4"
      [style.width]="100 * (pwStrength / 6) + '%'"
    ></span>
  </div>

  <span *ngIf="showStrength" class="strength">
    Password strength <b>{{ strength }}</b>
  </span>
</section>
